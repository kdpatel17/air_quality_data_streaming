steps:
  # Build and push the ingestion image
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'gcr.ingest/airqualitystreaming/data-ingestion-image', '-f', 'docker-compose.yml', '.']
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'gcr.ingest/airqualitystreaming/data-ingestion-image']

  # Build and push the consumer image
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'build', '-t', 'gcr.consume/airqualitystreaming/data-consumer-image', '-f', 'Dockerfile.consume', '.' ]
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'push', 'gcr.consume/airqualitystreaming/data-consumer-image' ]



