steps:
  # Build and push the ingestion image
  - name: 'gcr.io/cloud-builders/docker'
    args: ['build', '-t', 'ingest-gcr/airqualitystreaming/data-ingestion-image', '-f', 'docker-compose.yml', '.']
  - name: 'gcr.io/cloud-builders/docker'
    args: ['push', 'ingest-gcr/airqualitystreaming/data-ingestion-image']

  # Build and push the consumer image
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'build', '-t', 'consume-gcr/airqualitystreaming/data-consumer-image', '-f', 'Dockerfile.consume', '.' ]
  - name: 'gcr.io/cloud-builders/docker'
    args: [ 'push', 'consume-gcr/airqualitystreaming/data-consumer-image' ]



